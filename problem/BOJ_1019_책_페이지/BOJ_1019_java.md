# 책 페이지 (1019번, JAVA)
- 문제 링크 : https://www.acmicpc.net/problem/1019

## :mag: 문제 보기

책의 페이지 1부터 입력으로 주어진 마지막 페이지(n)까지 주어졌을 때 각 페이지에 숫자 0 ~ 9가 나오는 횟수의 총합을 구해야 하는 문제입니다.


&nbsp;

## :bulb: 문제 이해

마지막 페이지(n)가 253이 주어졌을 때 1 ~ 253 페이지 안에 숫자 0 ~ 9가 나오는 횟수를 모두 구해야 합니다. 해당 입력에 대한 출력은 아래와 같습니다.

```
  1 page : 숫자 1 카운팅 (+1)
  2 page : 숫자 2 카운팅 (+1)
 10 page : 숫자 1 카운팅 (+1), 숫자 0 카운팅 (+1)
 11 page : 숫자 1 카운팅 (+2)
...
253 page : 숫자 2 카운팅 (+1), 숫자 5 카운팅 (+1), 숫자 3 카운팅 (+1)

0 갯수 총합 : 45
1 갯수 총합 : 156
2 갯수 총합 : 110
3 갯수 총합 : 56
4 갯수 총합 : 55
5 갯수 총합 : 49
6 갯수 총합 : 45
7 갯수 총합 : 45
8 갯수 총합 : 45
9 갯수 총합 : 45

입력 :
253

출력 :
45 156 110 56 55 49 45 45 45 45
```

1, 2, 3, 4 ... 253 이러한 식으로 숫자들을 하나씩 확인하고 숫자 단위로 읽어서 카운팅을 해줌으로써 결과를 쉽게 얻을 수 있습니다.

그러나 이 문제에서 주어지는 최대 페이지 수가 10억이기 때문에 위와 같은 단순 반복문이나 브루트포스 알고리즘 등 시간복잡도가 O(n)인 방법으로는 시간 제한을 해결할 수 없습니다.

그래서 이 문제를 해결하기 위해서는 수가 카운팅되는 규칙을 찾아서 수학적인 방식으로 접근해야 합니다. 이 방법을 이용할 경우 주어진 수의 자릿수만큼의 시간복잡도가 소요되어 매우 효율적으로 처리할 수 있습니다.

&nbsp;

먼저 입력(N)이 주어졌을 때 다음 계산에 사용하기 위한 기준값을 먼저 구해봅니다.

```
입력(N) = 543,212,345
(9번째 자릿수 5) 5 * 10^자릿수-2 * 자릿수-1 = 5 * 10^7 * 8 = 400,000,000
(8번째 자릿수 4) 4 * 10^자릿수-2 * 자릿수-1 = 4 * 10^6 * 7 =  28,000,000
(7번째 자릿수 3) 3 * 10^자릿수-2 * 자릿수-1 = 3 * 10^5 * 6 =   1,800,000
(6번째 자릿수 2) 2 * 10^자릿수-2 * 자릿수-1 = 2 * 10^4 * 5 =     100,000
(5번째 자릿수 1) 1 * 10^자릿수-2 * 자릿수-1 = 1 * 10^3 * 4 =       4,000
(4번째 자릿수 2) 2 * 10^자릿수-2 * 자릿수-1 = 2 * 10^2 * 3 =         600
(3번째 자릿수 3) 3 * 10^자릿수-2 * 자릿수-1 = 3 * 10^1 * 2 =          60
(2번째 자릿수 4) 4 * 10^자릿수-2 * 자릿수-1 = 4 * 10^0 * 1 =           4
(1번째 자릿수 5)
```

위에서 구한 값들을 모두 합할 경우 429,904,664 가 나오게 됩니다. 구한 기준값을 가지고 각 숫자가 등장하는 갯수를 구할 것입니다.

참고로 이렇게 기준값을 먼저 구하고 계산하는 이유는 0이 등장하는 갯수를 구하는 계산방법과, 1~9가 등장하는 갯수를 구하는 계산방법이 다르기 때문입니다.

&nbsp;

### 숫자 1 ~ 9 등장 횟수 구하기
먼저 1 ~ 9가 등장하는 갯수를 구해봅시다. 1 ~ 9를 구하는 규칙은 아래와 같습니다.

```
1. 현재 자릿수에 해당하는 숫자가 구하고자 하는 숫자보다 클 경우 10^(현재 자릿수 - 1) 만큼 기준값에 더해줍니다.
2. 현재 자릿수에 해당하는 숫자가 구하고자 하는 숫자와 같을 경우 (뒤에 남은 숫자 + 1) 만큼 기준값에 더해줍니다.
3. 그 이외의 경우 계산을 수행하지 않습니다.
```

예를 들어 1 페이지 ~ 543,212,345 페이지까지 3이 등장하는 횟수를 구하고자 할 경우
```
(9번째 자릿수 5) 5 > 3 ... 10^(자릿수 - 1) = 10^8 = 100,000,000
(8번째 자릿수 4) 4 > 3 ... 10^(자릿수 - 1) = 10^7 =  10,000,000
(7번째 자릿수 3) 3 = 3 ... 뒤에 남은 숫자 + 1 = 212,345 + 1 = 212,346
(6번째 자릿수 2) 2 < 3
(5번째 자릿수 1) 1 < 3
(4번째 자릿수 2) 2 < 3
(3번째 자릿수 3) 3 = 3 ... 뒤에 남은 숫자 + 1 = 45 + 1 = 46
(2번째 자릿수 4) 4 > 3 ... 10^(자릿수 - 1) = 10^1 = 10
(1번째 자릿수 5) 5 > 3 ... 10^(자릿수 - 1) = 10^0 = 1

```
3이 등장하는 횟수 = 기준값 + 추가값 = 429,904,664 + (100,000,000 + 10,000,000 + 212,346 + 46 + 10 + 1) = 540,117,067

이러한 방식으로 0을 제외한 다른 숫자에 대한 등장 횟수를 구할 수 있습니다.

&nbsp;

### 숫자 0 등장 횟수 구하기
이제 0이 등장하는 갯수도 구해봅시다. 0을 구하는 규칙은 아래와 같습니다.

```
현재 자릿수에 해당하는 숫자가 0일 경우 아래 수식을 적용하여 기준값에 더해줍니다.

기준값 = 기준값 - (10^(현재 자릿수 - 1)) + (페이지 수 % 10^(현재 자릿수 - 1)) + 1
```

예를 들어 1 페이지 ~ 102,354,011 페이지까지 0이 등장하는 횟수를 구하고자 할 경우
```
(9번째 자릿수 1) 1 <> 0
(8번째 자릿수 0) 0 == 0 ... -(10^7) + (102,354,011 % 10^7) + 1 = -7,645,988
(7번째 자릿수 2) 2 <> 0
(6번째 자릿수 3) 3 <> 0
(5번째 자릿수 5) 5 <> 0
(4번째 자릿수 4) 4 <> 0
(3번째 자릿수 0) 0 == 0 ... -(10^2) + (102,354,011 % 10^2) + 1 = -88
(2번째 자릿수 1) 1 <> 0
(1번째 자릿수 1) 1 <> 0
```
0이 등장하는 횟수 = 기준값 + 추가값 = 81,371,201 + (-7,645,988 - 88) = 73,725,125

&nbsp;

## :pencil2: 문제 풀이
```
1. 기준값을 구합니다.

2. 숫자 0 이 등장하는 횟수를 구합니다.

3. 숫자 1 ~ 9 가 등장하는 횟수를 구합니다.

4. 결과 출력


변수는 아래와 같이 정의하였습니다.

N = 입력
D = 최대 자릿수
C = 현재 자릿수
M = 현재 자릿수의 숫자
F = 등장 횟수를 구하고자 하는 숫자
R = 기준값
```

### 1. 기준값 구하기
```
for(C = D-1; C>0; C--){
  M = (N % 10^(C + 1)) / 10^C
  R += 10^(C - 1) * M * C
}
```

### 2. 숫자 0 이 등장하는 횟수 구하기
```
for(C = D; C>0; C--){
  M = (N % 10^C) / 10^(C - 1)

  if(M = F)
    R = R - (10^(C - 1)) + (N % 10^(C - 1)) + 1
}
```

### 3. 숫자 1 ~ 9 가 등장하는 횟수 구하기
```
for(C = D; C>0; C--){
  M = (N % 10^C) / 10^(C - 1)

  if(M > F)
    R += 10^(C - 1)
  else if(M == F)
    R += (N % 10^(C - 1)) + 1
}
```

&nbsp;

## :clipboard: 참고 자료(출처)
 - 없음
