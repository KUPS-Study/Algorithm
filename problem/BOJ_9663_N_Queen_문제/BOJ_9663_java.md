# N-Queen 백준 9663

## 문제 보기

퀸이란 체스판 위의 퀸을 말하며, 퀸은 대각선 그리고 자신의 행과 열에 존재하는 다른 퀸을 공격 할 수 있습니다. N X N 체스판 위에서 N 개의 퀸이 서로 공격하지 않는 경우의 수를 구하는 것이 이번 문제의 중요 과제입니다.

## 문제 이해

우선 퀸은 행을 서로 공유할 경우 공격하게 되는 입장이기 때문에 첫 번째 행부터 퀸을 하나씩 올려두고 다음 행으로 이동합니다. 다음 행에서 퀸을 놓고 이전 퀸들과 서로 공격 가능한 위치에 존재하게 되는지 확인합니다. 서로 공격하지 않는 위치일 경우 다음으로 넘어갑니다. 이러한 메커니즘으로 NXN 체스판 위에 모든 퀸들을 올려 놓습니다. 

하지만 문제의 입력 조건을 보면 N이 최대 15가 될 수 있습니다. 15가 될 경우

위의 식대로 진행하게 되면 15의 15승이 되게 됩니다. 계산기를 두둘겨 본결과

437,893,890,380,859,375 이러한 값이 나오게 되는데 계산이 잘못된 것 같은 느낌이 들 만큼 큰 숫자인 것 같습니다. 모든 경우의 수를 고려할 경우 위와같은 수치가 나타나게 됩니다.

따라서 모든 경우의 수를 구하는 것으로 문제를 해결할 수 없습니다. 따라서 여기서 만약에 퀸을 놓을 수 없는 경우의 경우 다음 재귀 함수를 호출하지 않는 방식으로 해당 문제를 풀 수 있습니다. 이러한 개념이 백 트래킹이라고도 불리는대 해당 개념을 사용하여 문제를 풀 수 있습니다.

## 문제 풀이

해당 문제를 풀기 위해서 재귀 함수를 사용합니다. 

N의 값을 전역 변수로 호출하고 값을 입력하였다고 가정하겠습니다.

그리고 답이되는 ans 변수도 전역변수로 선언하고 0으로 초기화 했다고 가정하겠습니다.

```jsx
void rec_func(int k) {
	if(k == n+1) {
		// k가 n+1 값이 되어 있다는 것은 n개의 퀸을 체스판위로 올리는대 성공하였다는 의미입니다.
		ans++;	
	} else {
		// 여기서 for문을 n번 돌리는 이유는 행의 개수가 n이기 때문입니다.
		// 그리고 각 행의 열마다 퀸을 놓을 수 있는지 확인합니다.
		// 퀸이 서로 공격하는 위치일 경우 더이상 재귀 함수를 호출하지 않습니다.
		for(int i=1; i<n+1; i++){
			Queen[k] = i
			if(!atackable(k))
			{
				rec_func(k+1)
			}
			Queen[k] = 0
		}
	}
}
```

위와 같이 재귀함수의 틀을 잡아 보았습니다. 그러면 다음으로 atackable 함수에 대해 설명해보겠습니다.

attackable 함수를 살펴보기전에 잠시 공격 가능한 구간에 대한 설명을 해보겠습니다.

### 아래로 향하는 대각선

![Untitled Diagram.drawio (4).png](Untitled_Diagram.drawio_(4).png)

### 위로 향하는 대각선

![Untitled Diagram.drawio (3).png](Untitled_Diagram.drawio_(3).png)

이어서 소스코드 설명이 있겠습니다.

```jsx
bool atackable(int k) {
	bool canAtack = false;
	// k 번째에 현재 새로운 퀸이 생겼음으로 이전 행들과의 충돌하는지 확인합니다.
	for(int i=1; i<k; i++){
		// 같은 열에 있을 경우 서로 공격 가능함으로 canAtack 값을 true로 반환합니다.
		if (Queen[i] == Queen[k]){
			canAttack = true;
			break;
		}
		// 위 대각선에 퀸이 있을경우 공격 가능합니다.
		if (Queen[i] + i == Queen[k] + k){
			canAttack = true;
			break;	
		}
		// 아래 대각선에 퀸이 있을 경우 공격 가능합니다.
		if (Queen[i] - i == Queen[k] - k){
			canAttack = true;
			break;	
		}
	}	
	// 모든 조건에서 만족됬을 경우 canAttack값은 false가 들어가서 false를 리턴합니다.
	return canAttack
}
```

## 참고 자료 (출처)

패스트캠퍼스 자바 알고리즘 강의 공부를 통해 배운 것을 정리하였습니다.
